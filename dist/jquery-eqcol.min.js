(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t():typeof define==="function"&&define.amd?define(t):t()})(this,function(){"use strict";var e=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}var n=t(function(t,n){(function(e,r){typeof n==="object"&&typeof t!=="undefined"?r():typeof define==="function"&&define.amd?define(r):r()})(e,function(){"use strict";function e(){var e=document.createElement("div");e.setAttribute("data-a-b","c");return Boolean(e.dataset&&e.dataset.aB==="c")}function n(e){return e.dataset}var r=e()?n:function(e){var t={};var n=e.attributes;function r(){return this.value}function i(e,t){if(typeof t==="undefined"){this.removeAttribute(e)}else{this.setAttribute(e,t)}}for(var o=0,u=n.length;o<u;o++){var a=n[o];if(a){var f=a.name;if(f.indexOf("data-")===0){var l=f.slice(5).replace(/-./g,function(e){return e.charAt(1).toUpperCase()});var c=a.value;Object.defineProperty(t,l,{enumerable:true,get:r.bind({value:c||""}),set:i.bind(e,f)})}}}return t};function i(){if(typeof window.CustomEvent==="function"){return true}return false}var o=i()?window.CustomEvent:function(e,t){var n=document.createEvent("CustomEvent");t=t||{bubbles:false,cancelable:false,detail:undefined};n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail);return n};var u=function(){function e(e){this.value=e}function t(t){var n,r;function i(e,t){return new Promise(function(i,u){var a={key:e,arg:t,resolve:i,reject:u,next:null};if(r){r=r.next=a}else{n=r=a;o(e,t)}})}function o(n,r){try{var i=t[n](r);var a=i.value;if(a instanceof e){Promise.resolve(a.value).then(function(e){o("next",e)},function(e){o("throw",e)})}else{u(i.done?"return":"normal",i.value)}}catch(e){u("throw",e)}}function u(e,t){switch(e){case"return":n.resolve({value:t,done:true});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:false});break}n=n.next;if(n){o(n.key,n.arg)}else{r=null}}this._invoke=i;if(typeof t.return!=="function"){this.return=undefined}}if(typeof Symbol==="function"&&Symbol.asyncIterator){t.prototype[Symbol.asyncIterator]=function(){return this}}t.prototype.next=function(e){return this._invoke("next",e)};t.prototype.throw=function(e){return this._invoke("throw",e)};t.prototype.return=function(e){return this._invoke("return",e)};return{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}();var a=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var c=function e(t,n,r){if(t===null)t=Function.prototype;var i=Object.getOwnPropertyDescriptor(t,n);if(i===undefined){var o=Object.getPrototypeOf(t);if(o===null){return undefined}else{return e(o,n,r)}}else if("value"in i){return i.value}else{var u=i.get;if(u===undefined){return undefined}return u.call(r)}};var s=function e(t,n,r,i){var o=Object.getOwnPropertyDescriptor(t,n);if(o===undefined){var u=Object.getPrototypeOf(t);if(u!==null){e(u,n,r,i)}}else if("value"in o&&o.writable){o.value=r}else{var a=o.set;if(a!==undefined){a.call(i,r)}}return r};var v="eqcol";var p={useTallest:true,minHeight:0,byRow:true,groupAttr:"data-"+v,watchAttr:"data-"+v+"-watch"};var d={before:"equal",after:"equaled"};var h=Array.prototype.slice;var y=function(){function e(t,n){var i=this;a(this,e);if(typeof t==="string"){this._element=document.querySelector(t)}else if(t.nodeType){this._element=t}this._options=l({},p,r(this._element),n);setTimeout(function(){return i.equalize()},0)}f(e,[{key:"equalize",value:function e(){var t=this;var n=this._getItems();if(!n.length){return}var r=new o(d.before,{cancelable:true});this._element.dispatchEvent(r);if(r.defaultPrevented){return}var i=function e(){var r=h.call(n);var i=[];if(t._options.byRow){(function(){var e=t;var o=n[0].getBoundingClientRect().top;r=r.filter(function(t){if(e._getHeight(t)>0){if(t.getBoundingClientRect().top===o){return true}i.push(t)}return false})})()}if(r.length===1){var o=t._getHeight(r[0]);if(o<t._options.minHeight){r[0].style.height=t._options.minHeight+"px"}else{r[0].style.height="auto"}}else if(r.length>1){(function(){var e=r.map(t._getHeight);var n=t._options.useTallest?Math.max.apply(null,e):Math.min.apply(null,e);n=Math.max(t._options.minHeight,n);r.forEach(function(e){e.style.height=n+"px"})})()}n=i};while(n.length>0){i()}var u=new o(d.after,{cancelable:true});this._element.dispatchEvent(u)}},{key:"destroy",value:function e(){var t=this._getItems();h.call(t).forEach(function(e){e.style.height="auto"})}},{key:"_getItems",value:function e(){var t=this._element.getAttribute(""+this._options.groupAttr)||"";return this._element.querySelectorAll("["+this._options.watchAttr+'="'+t+'"]')}},{key:"_getHeight",value:function e(t){return t.offsetHeight}}]);return e}();t.exports=y})});var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(){function e(e){this.value=e}function t(t){var n,r;function i(e,t){return new Promise(function(i,u){var a={key:e,arg:t,resolve:i,reject:u,next:null};if(r){r=r.next=a}else{n=r=a;o(e,t)}})}function o(n,r){try{var i=t[n](r);var a=i.value;if(a instanceof e){Promise.resolve(a.value).then(function(e){o("next",e)},function(e){o("throw",e)})}else{u(i.done?"return":"normal",i.value)}}catch(e){u("throw",e)}}function u(e,t){switch(e){case"return":n.resolve({value:t,done:true});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:false});break}n=n.next;if(n){o(n.key,n.arg)}else{r=null}}this._invoke=i;if(typeof t.return!=="function"){this.return=undefined}}if(typeof Symbol==="function"&&Symbol.asyncIterator){t.prototype[Symbol.asyncIterator]=function(){return this}}t.prototype.next=function(e){return this._invoke("next",e)};t.prototype.throw=function(e){return this._invoke("throw",e)};t.prototype.return=function(e){return this._invoke("return",e)};return{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}();var o=function e(t,n,r){if(t===null)t=Function.prototype;var i=Object.getOwnPropertyDescriptor(t,n);if(i===undefined){var o=Object.getPrototypeOf(t);if(o===null){return undefined}else{return e(o,n,r)}}else if("value"in i){return i.value}else{var u=i.get;if(u===undefined){return undefined}return u.call(r)}};var u=function e(t,n,r,i){var o=Object.getOwnPropertyDescriptor(t,n);if(o===undefined){var u=Object.getPrototypeOf(t);if(u!==null){e(u,n,r,i)}}else if("value"in o&&o.writable){o.value=r}else{var a=o.set;if(a!==undefined){a.call(i,r)}}return r};$.fn.eqcol=function(e){return this.each(function(t,i){var o=$(i);var u=$.extend({},(typeof e==="undefined"?"undefined":r(e))==="object"&&e);var a=o.data("eqcolizer");if(!a){o.data("eqcolizer",a=new n(i,u))}if(typeof e==="string"){a[e]()}})}});
